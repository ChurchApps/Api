<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gateway Provider Testing Playground</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .method-card {
            margin-bottom: 20px;
        }
        .response-area {
            background-color: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 0.375rem;
            padding: 15px;
            margin-top: 10px;
            max-height: 300px;
            overflow-y: auto;
        }
        .error {
            color: #dc3545;
        }
        .success {
            color: #198754;
        }
        .loading {
            color: #0d6efd;
        }
    </style>
</head>
<body>
    <div class="container mt-4">
        <h1 class="mb-4">Gateway Provider Testing Playground</h1>

        <!-- Information Section -->
        <div class="alert alert-info mb-4">
            <h5>Available Gateway Providers</h5>
            <ul id="providersList">
                <li><strong>Stripe:</strong> Full payment processing with cards, bank accounts, subscriptions</li>
                <li><strong>PayPal:</strong> Online payments, subscriptions, PayPal wallet integration</li>
                <li><strong>Square:</strong> Point-of-sale and online payment processing</li>
                <li><strong>EPayMints:</strong> Church-focused payment processing solution</li>
            </ul>
            <p class="mb-0"><small>This playground allows you to test IGatewayProvider methods without authentication. Use test credentials only.</small></p>
        </div>

        <!-- Gateway Configuration Section -->
        <div class="card mb-4">
            <div class="card-header">
                <h3>Gateway Configuration</h3>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6">
                        <label for="gatewayProvider" class="form-label">Gateway Provider</label>
                        <select class="form-select" id="gatewayProvider">
                            <option value="">Select Provider</option>
                            <option value="stripe">Stripe</option>
                            <option value="paypal">PayPal</option>
                            <option value="square">Square</option>
                            <option value="epaymints">EPayMints</option>
                        </select>
                    </div>
                    <div class="col-md-6">
                        <label for="churchId" class="form-label">Church ID</label>
                        <input type="text" class="form-control" id="churchId" placeholder="Enter Church ID">
                    </div>
                </div>
                <div class="row mt-3">
                    <div class="col-md-6">
                        <label for="publicKey" class="form-label">Public Key</label>
                        <input type="text" class="form-control" id="publicKey" placeholder="Enter Public Key">
                    </div>
                    <div class="col-md-6">
                        <label for="privateKey" class="form-label">Private Key</label>
                        <input type="password" class="form-control" id="privateKey" placeholder="Enter Private Key">
                    </div>
                </div>
                <div class="row mt-3">
                    <div class="col-md-6">
                        <label for="webhookKey" class="form-label">Webhook Key</label>
                        <input type="text" class="form-control" id="webhookKey" placeholder="Enter Webhook Key">
                    </div>
                    <div class="col-md-6">
                        <label for="productId" class="form-label">Product ID (Optional)</label>
                        <input type="text" class="form-control" id="productId" placeholder="Enter Product ID">
                    </div>
                </div>
                <div class="row mt-3">
                    <div class="col-md-6">
                        <label for="environment" class="form-label">Environment</label>
                        <select class="form-select" id="environment">
                            <option value="sandbox">Sandbox</option>
                            <option value="production">Production</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>

        <!-- Method Testing Section -->
        <div class="card">
            <div class="card-header">
                <h3>Method Testing</h3>
            </div>
            <div class="card-body">
                <div class="accordion" id="methodsAccordion">

                    <!-- Calculate Fees -->
                    <div class="card method-card">
                        <div class="card-header" id="headingFees">
                            <h5 class="mb-0">
                                <button class="btn btn-link" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFees">
                                    Calculate Fees
                                </button>
                            </h5>
                        </div>
                        <div id="collapseFees" class="collapse" data-bs-parent="#methodsAccordion">
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-md-6">
                                        <label for="feeAmount" class="form-label">Amount</label>
                                        <input type="number" class="form-control" id="feeAmount" placeholder="100.00" step="0.01">
                                    </div>
                                    <div class="col-md-6">
                                        <button class="btn btn-primary" onclick="testCalculateFees()">Calculate Fees</button>
                                    </div>
                                </div>
                                <div class="response-area" id="feesResponse"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Process Charge -->
                    <div class="card method-card">
                        <div class="card-header" id="headingCharge">
                            <h5 class="mb-0">
                                <button class="btn btn-link" type="button" data-bs-toggle="collapse" data-bs-target="#collapseCharge">
                                    Process Charge
                                </button>
                            </h5>
                        </div>
                        <div id="collapseCharge" class="collapse" data-bs-parent="#methodsAccordion">
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-md-4">
                                        <label for="chargeAmount" class="form-label">Amount</label>
                                        <input type="number" class="form-control" id="chargeAmount" placeholder="100.00" step="0.01">
                                    </div>
                                    <div class="col-md-4">
                                        <label for="chargeCurrency" class="form-label">Currency</label>
                                        <input type="text" class="form-control" id="chargeCurrency" value="USD">
                                    </div>
                                    <div class="col-md-4">
                                        <label for="chargeEmail" class="form-label">Customer Email</label>
                                        <input type="email" class="form-control" id="chargeEmail" placeholder="test@example.com">
                                    </div>
                                </div>
                                <div class="row mt-3">
                                    <div class="col-md-12">
                                        <label for="chargePaymentMethod" class="form-label">Payment Method Token</label>
                                        <input type="text" class="form-control" id="chargePaymentMethod" placeholder="pm_test_token or payment method ID">
                                    </div>
                                </div>
                                <div class="row mt-3">
                                    <div class="col-md-12">
                                        <label for="chargeCustomerId" class="form-label">Customer ID (optional)</label>
                                        <input type="text" class="form-control" id="chargeCustomerId" placeholder="cus_test_id">
                                    </div>
                                </div>
                                <div class="row mt-3">
                                    <div class="col-md-12">
                                        <button class="btn btn-primary" onclick="testProcessCharge()">Process Charge</button>
                                    </div>
                                </div>
                                <div class="response-area" id="chargeResponse"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Create Customer -->
                    <div class="card method-card">
                        <div class="card-header" id="headingCustomer">
                            <h5 class="mb-0">
                                <button class="btn btn-link" type="button" data-bs-toggle="collapse" data-bs-target="#collapseCustomer">
                                    Create Customer
                                </button>
                            </h5>
                        </div>
                        <div id="collapseCustomer" class="collapse" data-bs-parent="#methodsAccordion">
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-md-6">
                                        <label for="customerEmail" class="form-label">Email</label>
                                        <input type="email" class="form-control" id="customerEmail" placeholder="customer@example.com">
                                    </div>
                                    <div class="col-md-6">
                                        <label for="customerName" class="form-label">Name</label>
                                        <input type="text" class="form-control" id="customerName" placeholder="John Doe">
                                    </div>
                                </div>
                                <div class="row mt-3">
                                    <div class="col-md-12">
                                        <button class="btn btn-primary" onclick="testCreateCustomer()">Create Customer</button>
                                    </div>
                                </div>
                                <div class="response-area" id="customerResponse"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Create Subscription -->
                    <div class="card method-card">
                        <div class="card-header" id="headingSubscription">
                            <h5 class="mb-0">
                                <button class="btn btn-link" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSubscription">
                                    Create Subscription
                                </button>
                            </h5>
                        </div>
                        <div id="collapseSubscription" class="collapse" data-bs-parent="#methodsAccordion">
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-md-4">
                                        <label for="subAmount" class="form-label">Amount</label>
                                        <input type="number" class="form-control" id="subAmount" placeholder="25.00" step="0.01">
                                    </div>
                                    <div class="col-md-4">
                                        <label for="subInterval" class="form-label">Interval</label>
                                        <select class="form-select" id="subInterval">
                                            <option value="month">Monthly</option>
                                            <option value="week">Weekly</option>
                                            <option value="year">Yearly</option>
                                        </select>
                                    </div>
                                    <div class="col-md-4">
                                        <label for="subCustomerId" class="form-label">Customer ID</label>
                                        <input type="text" class="form-control" id="subCustomerId" placeholder="cus_test_id">
                                    </div>
                                </div>
                                <div class="row mt-3">
                                    <div class="col-md-12">
                                        <label for="subResourceId" class="form-label">Gateway Resource ID</label>
                                        <input type="text" class="form-control" id="subResourceId" placeholder="Payment method or subscription ID (provider specific)">
                                    </div>
                                </div>
                                <div class="row mt-3">
                                    <div class="col-md-12">
                                        <button class="btn btn-primary" onclick="testCreateSubscription()">Create Subscription</button>
                                    </div>
                                </div>
                                <div class="response-area" id="subscriptionResponse"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Generate Client Token -->
                    <div class="card method-card">
                        <div class="card-header" id="headingToken">
                            <h5 class="mb-0">
                                <button class="btn btn-link" type="button" data-bs-toggle="collapse" data-bs-target="#collapseToken">
                                    Generate Client Token
                                </button>
                            </h5>
                        </div>
                        <div id="collapseToken" class="collapse" data-bs-parent="#methodsAccordion">
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-md-12">
                                        <button class="btn btn-primary" onclick="testGenerateClientToken()">Generate Client Token</button>
                                    </div>
                                </div>
                                <div class="response-area" id="tokenResponse"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Create Webhook Endpoint -->
                    <div class="card method-card">
                        <div class="card-header" id="headingWebhook">
                            <h5 class="mb-0">
                                <button class="btn btn-link" type="button" data-bs-toggle="collapse" data-bs-target="#collapseWebhook">
                                    Create Webhook Endpoint
                                </button>
                            </h5>
                        </div>
                        <div id="collapseWebhook" class="collapse" data-bs-parent="#methodsAccordion">
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-md-12">
                                        <label for="webhookUrl" class="form-label">Webhook URL</label>
                                        <input type="url" class="form-control" id="webhookUrl" placeholder="https://example.com/webhook">
                                    </div>
                                </div>
                                <div class="row mt-3">
                                    <div class="col-md-12">
                                        <button class="btn btn-primary" onclick="testCreateWebhook()">Create Webhook</button>
                                    </div>
                                </div>
                                <div class="response-area" id="webhookResponse"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Update Subscription -->
                    <div class="card method-card">
                        <div class="card-header" id="headingUpdateSub">
                            <h5 class="mb-0">
                                <button class="btn btn-link" type="button" data-bs-toggle="collapse" data-bs-target="#collapseUpdateSub">
                                    Update Subscription
                                </button>
                            </h5>
                        </div>
                        <div id="collapseUpdateSub" class="collapse" data-bs-parent="#methodsAccordion">
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-md-6">
                                        <label for="updateSubId" class="form-label">Subscription ID</label>
                                        <input type="text" class="form-control" id="updateSubId" placeholder="sub_test_id">
                                    </div>
                                    <div class="col-md-6">
                                        <label for="updateSubAmount" class="form-label">New Amount</label>
                                        <input type="number" class="form-control" id="updateSubAmount" placeholder="35.00" step="0.01">
                                    </div>
                                </div>
                                <div class="row mt-3">
                                    <div class="col-md-12">
                                        <button class="btn btn-primary" onclick="testUpdateSubscription()">Update Subscription</button>
                                    </div>
                                </div>
                                <div class="response-area" id="updateSubResponse"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Cancel Subscription -->
                    <div class="card method-card">
                        <div class="card-header" id="headingCancelSub">
                            <h5 class="mb-0">
                                <button class="btn btn-link" type="button" data-bs-toggle="collapse" data-bs-target="#collapseCancelSub">
                                    Cancel Subscription
                                </button>
                            </h5>
                        </div>
                        <div id="collapseCancelSub" class="collapse" data-bs-parent="#methodsAccordion">
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-md-6">
                                        <label for="cancelSubId" class="form-label">Subscription ID</label>
                                        <input type="text" class="form-control" id="cancelSubId" placeholder="sub_test_id">
                                    </div>
                                    <div class="col-md-6">
                                        <label for="cancelReason" class="form-label">Reason (Optional)</label>
                                        <input type="text" class="form-control" id="cancelReason" placeholder="User requested cancellation">
                                    </div>
                                </div>
                                <div class="row mt-3">
                                    <div class="col-md-12">
                                        <button class="btn btn-danger" onclick="testCancelSubscription()">Cancel Subscription</button>
                                    </div>
                                </div>
                                <div class="response-area" id="cancelSubResponse"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Create Product -->
                    <div class="card method-card">
                        <div class="card-header" id="headingProduct">
                            <h5 class="mb-0">
                                <button class="btn btn-link" type="button" data-bs-toggle="collapse" data-bs-target="#collapseProduct">
                                    Create Product
                                </button>
                            </h5>
                        </div>
                        <div id="collapseProduct" class="collapse" data-bs-parent="#methodsAccordion">
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-md-12">
                                        <p class="text-muted">Creates a product for the specified church. Some providers require products for subscription management.</p>
                                        <button class="btn btn-primary" onclick="testCreateProduct()">Create Product</button>
                                    </div>
                                </div>
                                <div class="response-area" id="productResponse"></div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="playground.js"></script>
</body>
</html>
